name: TEST-Master-CI (Logging Only)

on:
  workflow_dispatch:
    inputs:
      tag_part:
        description: 'Version part'
        required: true
        default: 'PATCH'

jobs:
  test-master:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Infrastructure Simulator
        uses: ./.github/actions/infrastructure
        
      - name: ğŸ” Debug Secrets (B64 Encoded)
        run: |
          # ä½¿ç”¨ Base64 ç·¨ç¢¼è¼¸å‡ºä»¥ç¹é GitHub Actions çš„è‡ªå‹•é®è”½ (***)
          # è¤‡è£½è¼¸å‡ºå­—ä¸²å¾Œï¼Œå¯ä½¿ç”¨ 'echo "å­—ä¸²" | base64 --decode' é€²è¡Œé©—è­‰
          echo "=== è¤‡è£½ä»¥ä¸‹å­—ä¸²é€²è¡Œ Base64 è§£ç¢¼é©—è­‰ ==="
          echo "GHCR_TOKEN: $(echo ${{ secrets.GHCR_TOKEN }} | base64)"

      - name: Build and Push Simulator
        uses: ./.github/actions/build-push
        with:
          tag_part: ${{ github.event.inputs.tag_part || 'PATCH' }}
          ghcr_token: ${{ secrets.GHCR_TOKEN }}
